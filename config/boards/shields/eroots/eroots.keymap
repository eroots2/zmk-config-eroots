#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
// #include <dt-bindings/zmk/trackball_pim447.h> 
#include <dt-bindings/zmk/pointing.h>

#define LY0 0
#define LY1 1
#define LY2 2
#define LY3 3
#define LY4 4
#define LY5 5

#define COMBO(NAME, BINDINGS, KEYPOS) \
  combo_##NAME { \
    timeout-ms = <50>; \
    bindings = <BINDINGS>; \
    key-positions = <KEYPOS>; \
    layers = <-1>; \
  };


/ {
        combos {
                compatible = "zmk,combos";
                      
                COMBO(entr, &kp ENTER, 39 40)
                COMBO(bspc, &kp BSPC, 40 41)
        };




    keymap {
        compatible = "zmk,keymap";

        default_layer {
            display-name = "default";
            bindings = <
            // --------------------------------------------------------------------------------------------------------------------------------------------------------
                &kp ESC  &kp GRAVE &kp N1   &kp N2   &kp N3   &kp N4   &kp N5   &kp N6              &kp N7   &kp N8    &kp N9    &kp N0    &kp MINUS &kp PLUS &kp BSPC
            // --------------------------------------------------------------------------------------------------------------------------------------------------------
               &kp LANG2 &kp TAB   &kp Q    &kp W    &kp E    &kp R    &kp T               &kp Y    &kp U    &kp I     &kp O     &kp P     &kp LBKT  &kp RBKT &kp BSLH
            // --------------------------------------------------------------------------------------------------------------------------------------------------------
                &kp DEL  &kp CAPS  &kp A    &kp S    &kp D    &kp F    &kp G                        &kp H    &kp J     &kp K     &kp L     &kp SEMI  &kp SQT  &kp ENTER
            // --------------------------------------------------------------------------------------------------------------------------------------------------------
                &kp 3    &kp LSHFT &kp Z    &kp X    &kp C    &kp C    &kp B                        &kp B    &kp N     &kp M     &kp COMMA &kp DOT   &kp FSLH &kp RSHFT
            // --------------------------------------------------------------------------------------------------------------------------------------------------------
                &kp 4    &kp LCTRL &kp LGUI &kp LALT &mo LY2  &lt LY2 SPACE             &lt LY1 SPACE &kp SPACE &lt LY3 SPACE    &kp LEFT  &kp DOWN  &kp UP   &kp RIGHT
            // --------------------------------------------------------------------------------------------------------------------------------------------------------
            >;
        };

        lower_layer {
            display-name = "lower";
            bindings = <
            // --------------------------------------------------------------------------------------------------------------------------------------------------------
                &trans    &trans    &kp F1   &kp F2   &kp F3   &kp F4   &kp F5   &kp F6              &kp F7   &kp F8    &kp F9    &kp F10   &kp F11   &kp F12  &trans
            // --------------------------------------------------------------------------------------------------------------------------------------------------------
                &trans    &trans    &trans   &trans    &trans     &trans    &trans               &trans    &trans    &trans     &trans     &trans     &trans     &trans    &trans
            // --------------------------------------------------------------------------------------------------------------------------------------------------------
                &trans    &trans    &trans   &trans    &trans    &trans    &trans                        &kp LEFT  &kp DOWN   &kp UP     &RIGHT     &trans     &trans    &trans  
            // --------------------------------------------------------------------------------------------------------------------------------------------------------
                &trans    &trans    &trans   &trans    &trans    &trans    &trans                        &trans    &trans     &trans     &trans     &trans     &trans    &trans 
            // --------------------------------------------------------------------------------------------------------------------------------------------------------
                &trans    &trans    &trans   &trans    &trans    &trans                                 &trans    &trans     &trans     &trans     &trans     &trans    &trans 
            // --------------------------------------------------------------------------------------------------------------------------------------------------------
            >;  
        };

        upper_layer {
            display-name = "upper";
            bindings = <
                &studio_unlock  &trans   &trans         &trans         &trans    &trans    &trans    &trans               &trans    &trans     &trans     &trans     &trans     &trans    &trans
                &trans          &trans   &mkp MB1       &mkp MB2       &mkp MB3   &trans    &trans               &trans    &trans    &trans     &trans     &trans     &trans     &trans    &trans
                &trans          &trans   &msc SCRL_UP   &msc SCRL_DOWN  &trans    &trans    &trans                        &trans    &trans     &trans     &trans     &trans     &trans    &trans  
                &trans          &trans   &msc SCRL_LEFT &msc SCRL_RIGHT &trans    &trans    &trans                        &trans    &trans     &trans     &trans     &trans     &trans    &trans 
                &trans          &trans   &trans         &trans          &trans    &trans                                 &trans    &trans     &trans     &trans     &trans     &trans    &trans 
            >;  
        };

        numbr_layer {
            display-name = "numbr";
            bindings = <
                &bt BT_CLR  &none    &bt BT_SEL 0 &bt BT_SEL 1  &bt BT_SEL 2  &none    &none    &none    &none               &none    &none     &none     &none     &none     &none    &none
                &none    &none    &none    &none    &none    &none    &none               &none    &none    &none     &none     &none     &none     &none    &none
                &none    &none    &none    &none    &none    &none    &none                        &none    &none     &none     &none     &none     &none    &none  
                &none    &none    &none    &none    &none    &none    &none                        &none    &none     &none     &none     &none     &none    &none 
                &none    &none    &none    &none    &none    &none                                 &none    &none     &none     &none     &none     &none    &none 
            >;  
        };

        func_layer {
            display-name = "func";
            bindings = <
                &none    &none    &none    &none    &none    &none    &none    &none               &none    &none     &none     &none     &none     &none    &none
                &none    &none    &none    &none    &none    &none    &none               &none    &none    &none     &none     &none     &none     &none    &none
                &none    &none    &none    &none    &none    &none    &none                        &none    &none     &none     &none     &none     &none    &none  
                &none    &none    &none    &none    &none    &none    &none                        &none    &none     &none     &none     &none     &none    &none 
                &none    &none    &none    &none    &none    &none                                 &none    &none     &none     &none     &none     &none    &none 
            >;  
        };

        func1_layer {
            display-name = "func1";
            bindings = <
                &none    &none    &none    &none    &none    &none    &none    &none               &none    &none     &none     &none     &none     &none    &none
                &none    &none    &none    &none    &none    &none    &none               &none    &none    &none     &none     &none     &none     &none    &none
                &none    &none    &none    &none    &none    &none    &none                        &none    &none     &none     &none     &none     &none    &none  
                &none    &none    &none    &none    &none    &none    &none                        &none    &none     &none     &none     &none     &none    &none 
                &none    &none    &none    &none    &none    &none                                 &none    &none     &none     &none     &none     &none    &none 
            >;  
        };
    };
};